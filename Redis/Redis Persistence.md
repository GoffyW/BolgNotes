## Redis Persistence

Redis 基于内存的存储，必然存在断电既失的问题，持久化硬盘就显得极为重要了

### RDB

- RDB 周期化的持久方式，通过save命令触发，可配置。

- 既然是周期就可生成多个文件，性能高，因为只需要fork一个子进程去执行磁盘IO操作。

- 恢复时间快，但是存在的问题就是数据不完整，因为默认5分钟，如果在4分59秒发生服务宕机，那这5分钟的数据就丢失了

### AOF

- AOF 一般每隔一秒执行一次fsync操作，所以最多丢失一秒的数据。

- 数据完整性好。可做灾难性的误删除的紧急恢复
- AOF这种较为复杂的基于命令日志/merge/回访的方式，比基于RDB每次持久化一份完整的数据快照的方式要更加脆弱一点，容易有BUG
- 同时使用，RDB做冷备，AOF保证数据的完整性